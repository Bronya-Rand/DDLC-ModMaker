<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Custom Text Tags &#8212; Ren&#39;Py Documentation</title>
    <link rel="stylesheet" href="_static/renpydoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '7.3.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Character Callbacks" href="character_callbacks.html" />
    <link rel="prev" title="Creator-Defined Statements" href="cds.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Ren&#39;Py Documentation</a>
        <span class="navbar-text navbar-version pull-left"><b>7.3.5</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://www.renpy.org">Home Page</a></li>
                <li><a href="https://www.renpy.org/doc/html/">Online Documentation</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI Customization Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="language_basics.html">Language Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="label.html">Labels &amp; Control Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogue.html">Dialogue and Narration</a></li>
<li class="toctree-l1"><a class="reference internal" href="displaying_images.html">Displaying Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="menus.html">In-Game Menus</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="conditional.html">Conditional Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio.html">Audio</a></li>
<li class="toctree-l1"><a class="reference internal" href="movie.html">Movie</a></li>
<li class="toctree-l1"><a class="reference internal" href="voice.html">Voice</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">Translation</a></li>
<li class="toctree-l1"><a class="reference internal" href="displayables.html">Displayables</a></li>
<li class="toctree-l1"><a class="reference internal" href="transforms.html">Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="transitions.html">Transitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="atl.html">Animation and Transformation Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="layeredimage.html">Layered Images</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="style.html">Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="style_properties.html">Style Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="screens.html">Screens and Screen Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_actions.html">Screen Actions, Values, and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_special.html">Special Screen Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_optimization.html">Screen Language Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="preferences.html">Preference Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="store_variables.html">Store Variables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer_tools.html">Developer Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="director.html">Interactive Director</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nvl_mode.html">NVL-Mode Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="input.html">Text Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="side_image.html">Side Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="rooms.html">Image Gallery, Music Room, and Replay Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="drag_drop.html">Drag and Drop</a></li>
<li class="toctree-l1"><a class="reference internal" href="sprites.html">Sprites</a></li>
<li class="toctree-l1"><a class="reference internal" href="keymap.html">Customizing the Keymap</a></li>
<li class="toctree-l1"><a class="reference internal" href="achievement.html">Achievements</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Dialogue History</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple.html">Multiple Character Dialogue</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="statement_equivalents.html">Statement Equivalents</a></li>
<li class="toctree-l1"><a class="reference internal" href="save_load_rollback.html">Saving, Loading, and Rollback</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent.html">Persistent Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="trans_trans_python.html">Transforms and Transitions in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_advanced.html">Advanced GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_python.html">Screens and Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="modes.html">Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="udd.html">Creator-Defined Displayables</a></li>
<li class="toctree-l1"><a class="reference internal" href="cds.html">Creator-Defined Statements</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Custom Text Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="character_callbacks.html">Character Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_python.html">File Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="color_class.html">Color Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="other.html">Other Functions and Variables</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="updater.html">Web Updater</a></li>
<li class="toctree-l1"><a class="reference internal" href="android.html">Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="chromeos.html">Chrome OS / Chrome Browser</a></li>
<li class="toctree-l1"><a class="reference internal" href="ios.html">iOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="iap.html">In-App Purchasing</a></li>
<li class="toctree-l1"><a class="reference internal" href="gesture.html">Gestures</a></li>
<li class="toctree-l1"><a class="reference internal" href="raspi.html">Raspberry Pi</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="problems.html">Dealing with Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_variables.html">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="self_voicing.html">Self-Voicing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="editor.html">Text Editor Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="skins.html">Skins</a></li>
<li class="toctree-l1"><a class="reference internal" href="translating_renpy.html">Translating Ren'Py</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Full Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="incompatible.html">Incompatible Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributor.html">Distributor Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="sponsors.html">Ren'Py Development Sponsors</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="thequestion.html">Script of The Question</a></li>
<li class="toctree-l1"><a class="reference internal" href="thequestion_nvl.html">NVL-mode script for The Question</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Custom Text Tags</a><ul>
<li><a class="reference internal" href="#caveats">Caveats</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="custom-text-tags">
<span id="id1"></span><h1>Custom Text Tags<a class="headerlink" href="#custom-text-tags" title="Permalink to this headline"> link</a></h1>
<p>Ren'Py has support for defining your own text tags. These text tags
can manipulate the text and text tags defined within, including adding
and removing text and other text tags.</p>
<p>Custom text tags are created by assigning a text tag function to an
entry in the config.custom_text_tags dictionary or the
config.self_closing_custom_tags dictionary.</p>
<dl class="var">
<dt id="var-config.custom_text_tags">
define <code class="descname">config.custom_text_tags</code><a class="headerlink" href="#var-config.custom_text_tags" title="Permalink to this definition"> link</a></dt>
<dd><p>Maps text tag names to text tag functions, when the text tag can
wrap other text.</p>
</dd></dl>

<dl class="var">
<dt id="var-config.self_closing_custom_text_tags">
define <code class="descname">config.self_closing_custom_text_tags</code><a class="headerlink" href="#var-config.self_closing_custom_text_tags" title="Permalink to this definition"> link</a></dt>
<dd><p>Maps text tag names to a self-closing text tag functions, when the text tag
does not wrap other text.</p>
</dd></dl>

<p>A text tag function takes three arguments: The tag itself, the argument
for the tag, and a list of content tuples. For example, for the text:</p>
<div class="highlight-renpy"><div class="highlight"><pre><span></span><span class="s2">&quot;{big=2}Hello, {b}World{/b}{/big}&quot;</span>
</pre></div>
</div>
<p>The tag will be &quot;big&quot;, the argument will be the string &quot;2&quot;, and the list
of content tuples will be:</p>
<div class="highlight-renpy"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">(</span><span class="n">renpy</span><span class="o">.</span><span class="n">TEXT_TEXT</span><span class="p">,</span> <span class="s2">&quot;Hello, &quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">renpy</span><span class="o">.</span><span class="n">TEXT_TAG</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">renpy</span><span class="o">.</span><span class="n">TEXT_TEXT</span><span class="p">,</span> <span class="s2">&quot;World&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="n">renpy</span><span class="o">.</span><span class="n">TEXT_TAG</span><span class="p">,</span> <span class="s2">&quot;/b&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The text tag function should return a new list of content tuples, which
is used to replace the text tag and its contents.</p>
<p>Content tuples consist of two components. The first component is one of the
the constants in the following list. The second component varies based on
the first component, as described below.</p>
<dl class="docutils">
<dt>renpy.TEXT_TEXT</dt>
<dd>The second component is text that is intended for display to the user.</dd>
<dt>renpy.TEXT_TAG</dt>
<dd>The second component is the contents of a text tag, without the
enclosing braces.</dd>
<dt>renpy.TEXT_DISPLAYABLE</dt>
<dd>The second component is a displayable to be embedded into the text.</dd>
<dt>renpy.TEXT_PARAGRAPH</dt>
<dd>This represents a break between paragraphs, and the second component
is undefined (but must be present).</dd>
</dl>
<p>A self-closing text tag function is similar, except that it does not take
the third argument.</p>
<div class="section" id="caveats">
<h2>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline"> link</a></h2>
<p>The dialogue text tags {p}, {w}, {nw}, and {fast} are processed before
custom text tags, and should either be not included inside a custom
text tag, or passed through unchanged.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"> link</a></h2>
<p>The example <code class="docutils literal"><span class="pre">big</span></code> text tag works like the {size} text tag, but applies a
multiplier to its argument.</p>
<div class="highlight-renpy"><div class="highlight"><pre><span></span><span class="k">init</span> <span class="k">python</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">big_tag</span><span class="p">(</span><span class="k">tag</span><span class="p">,</span> <span class="n">argument</span><span class="p">,</span> <span class="n">contents</span><span class="p">):</span>

        <span class="na">size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span> <span class="o">*</span> <span class="mi">20</span>

        <span class="k">return</span> <span class="p">[</span>
                <span class="p">(</span><span class="n">renpy</span><span class="o">.</span><span class="n">TEXT_TAG</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;size={}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="na">size</span><span class="p">)),</span>
            <span class="p">]</span> <span class="o">+</span> <span class="n">contents</span> <span class="o">+</span> <span class="p">[</span>
                <span class="p">(</span><span class="n">renpy</span><span class="o">.</span><span class="n">TEXT_TAG</span><span class="p">,</span> <span class="sa">u</span><span class="s2">&quot;/size&quot;</span><span class="p">),</span>
            <span class="p">]</span>

    <span class="n">config</span><span class="o">.</span><span class="n">custom_text_tags</span><span class="p">[</span><span class="s2">&quot;big&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">big_tag</span>


<span class="s2">&quot;This is {big=3}BIG!{/big}&quot;</span>
</pre></div>
</div>
<p>The example <code class="docutils literal"><span class="pre">rot13</span></code> text tag applies the ROT13 transform to text. Note that
ROT26 – ROT13 applied twice – is just normal text.</p>
<div class="highlight-renpy"><div class="highlight"><pre><span></span><span class="k">init</span> <span class="k">python</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">rot13_tag</span><span class="p">(</span><span class="k">tag</span><span class="p">,</span> <span class="n">argument</span><span class="p">,</span> <span class="n">contents</span><span class="p">):</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="p">[</span> <span class="p">]</span>

        <span class="k">for</span> <span class="n">kind</span><span class="p">,</span> <span class="k">text</span> <span class="k">in</span> <span class="n">contents</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="n">renpy</span><span class="o">.</span><span class="n">TEXT_TEXT</span><span class="p">:</span>
                <span class="k">text</span> <span class="o">=</span> <span class="k">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;rot13&quot;</span><span class="p">)</span>

            <span class="n">rv</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">kind</span><span class="p">,</span> <span class="k">text</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">rv</span>

    <span class="n">config</span><span class="o">.</span><span class="n">custom_text_tags</span><span class="p">[</span><span class="s2">&quot;rot13&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rot13_tag</span>

<span class="s2">&quot;Rot0. {rot13}Rot13. {rot13}Rot26. {/rot13}Rot13. {/rot13}Rot0.&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">bang</span></code> text tag inserts a specific image into the text, and doesn't require
a closing tag.</p>
<div class="highlight-renpy"><div class="highlight"><pre><span></span><span class="k">init</span> <span class="k">python</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">bang_tag</span><span class="p">(</span><span class="k">tag</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span> <span class="p">(</span> <span class="n">renpy</span><span class="o">.</span><span class="n">TEXT_TAG</span><span class="p">,</span> <span class="s2">&quot;size=40&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">renpy</span><span class="o">.</span><span class="n">TEXT_TEXT</span><span class="p">,</span> <span class="s2">&quot;!&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">renpy</span><span class="o">.</span><span class="n">TEXT_TAG</span><span class="p">,</span> <span class="s2">&quot;/size&quot;</span><span class="p">)</span> <span class="p">]</span>

    <span class="n">config</span><span class="o">.</span><span class="n">self_closing_custom_text_tags</span><span class="p">[</span><span class="s2">&quot;bang&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bang_tag</span>

<span class="s2">&quot;This is awesome{bang}&quot;</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2012-2019, Tom Rothamel.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>